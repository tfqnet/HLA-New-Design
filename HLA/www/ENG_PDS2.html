<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
<title>HLA</title>
<meta name="viewport" content="user-scalable=1, initial-scale=1, maximum-scale=5, minimum-scale=1, target-densitydpi=device-dpi" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/hla.js"></script>
<script type="text/javascript" charset="utf-8">
    var db;
    var shortName = 'WebSqlDB';
    var version = '1.0';
    var displayName = 'WebSqlDB';
    var maxSize = 65535;
    var siNo = '';
    var planCode = '';
    var planName = '';
    var cashPaymentD = '';
    var mcashPaymentD = '';
    //var cashPayment = 0;
    
    function errorHandler(transaction, error) {
        alert('Error: ' + error.message + ' code: ' + error.code);
    }
    
    function successCallBack() {
        alert("DEBUGGING: success");
        
    }
    
    function nullHandler(){};
    
    function onBodyLoad(){
        //alert($('#aa').text())
    	//alert("DEBUGGING: we are in the onBodyLoad() function");
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
            
        db = openDatabase(shortName, version, displayName,maxSize);
        ListDBValues();
        calcTotal();
    }
    
    function dbexe(){
        db.transaction(function(transaction) {
                       transaction.executeSql('SELECT * FROM SI_Temp_Trad_Details;', [], function(transaction, result) {
                                              if (result != null && result.rows != null) {
                                              var row;
                                              for (var i = 0; i < result.rows.length; i++) {
                                              var row = result.rows.item(i);
                                              }
        
                                              }
                                              },errorHandler);
                       },errorHandler,nullHandler);
    }
    
    function ListDBValues() {
        
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
        
        
        db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for (var i = 0; i < result.rows.length; i++) {
                        var row = result.rows.item(i);
                        $('#SICode').html(row.SINo);
                        siNo = row.SINo;
                        planName = row.PlanName;
                        planCode = row.PlanCode;                    
                    }
                }
                else{
                                   alert('No data can be found');
                    }
                                   
            },errorHandler);
        },errorHandler,nullHandler);
        
        db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Details WHERE SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                	//$('#dateModified').html(row.UpdatedAt);
			var now = new Date();	
			var displayDate = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();
			var displayDateFull = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear() + ' ' + now.getHours() + ':' + now.getMinutes() + ':' + now.getSeconds();
			
			$('#dateModified').html(displayDateFull);
			
			$('#PremPayYear').html(row.PremiumPaymentOption);
			$('#AdvanceYearlyIncome').html(row.AdvanceYearlyIncome);
			var zzz;
			var desc;
			var sss;
			var rrr;
			if(row.PremiumPaymentOption == '6'){
			    if(row.AdvanceYearlyIncome == '60'){
				zzz = parseFloat(row.BasicSA) * 18;
				desc = '(60.0% of all future GYI yet to fall due)';
			    }
			    else if(row.AdvanceYearlyIncome == '75') {
				zzz = parseFloat(row.BasicSA) * 12.75;
				desc = '(85.0% of all future GYI yet to fall due)';
			    }
			    else{
				document.getElementById('hide').style.visibility = "hidden";
			    }
			    sss = parseFloat(row.BasicSA) * 4.5;
			    rrr = parseFloat(row.BasicSA) * 4.5;
			}
			else if(row.PremiumPaymentOption == '9' ){
			    if(row.AdvanceYearlyIncome == '60'){
				zzz = parseFloat(row.BasicSA) * 18.75;
				desc = '(62.5% of all future GYI yet to fall due)';
			    }
			    else if(row.AdvanceYearlyIncome == '75') {
				zzz = parseFloat(row.BasicSA) * 13.5;
				desc = '(90.0% of all future GYI yet to fall due)';
			    }
			    else{
				document.getElementById('hide').style.visibility = "hidden";
			    }
			    sss = parseFloat(row.BasicSA) * 6.5;
			    rrr = parseFloat(row.BasicSA) * 6.5;
			}
			else if(row.PremiumPaymentOption == '12' ){
			    if(row.AdvanceYearlyIncome == '60'){
				zzz = parseFloat(row.BasicSA) * 19.5;
				desc = '(65.0% of all future GYI yet to fall due)';
			    }
			    else if(row.AdvanceYearlyIncome == '75') {
				zzz = parseFloat(row.BasicSA) * 14.25;
				desc = '(95.0% of all future GYI yet to fall due)';
			    }
			    else{
				document.getElementById('hide').style.visibility = "hidden";
			    }
			    sss = parseFloat(row.BasicSA) * 8.5;
			    rrr = parseFloat(row.BasicSA) * 8.5;
			}
			$('#BasicSA').html(formatCurrency(zzz));
			$('#AmountPayableDesc').html(desc);
			$('#GuaranteedDeathOrTPDBenefit').html( formatCurrency(sss));
			$('#GuaranteedMaturityBenefit').html( formatCurrency( rrr));
                }
            },errorHandler);
        },errorHandler,nullHandler);
        
        
        
        return;
    }
    
    function calcTotal(){
        //alert($('#row0col5').text())
    }

    function formatCurrency(num) {
        if(num == '-'){
            return ('-');
        }
        num = num.toString().replace(/\$|\,/g, '');
        if (isNaN(num)) num = "0";
        sign = (num == (num = Math.abs(num)));
        num = Math.floor(num * 100 + 0.50000000001);
        cents = num % 100;
        num = Math.floor(num / 100).toString();
        if (cents < 10) cents = "0" + cents;
        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++)
        num = num.substring(0, num.length - (4 * i + 3)) + ',' + num.substring(num.length - (4 * i + 3));
        return (((sign) ? '' : '-') + '' + num + '.' + cents);
        //document.write (((sign) ? '' : '-') + '' + num + '.' + cents);
    }
    
    function replaceChar(char){
        var temp, returnVal;
        if (char == "0")
            returnVal = "-"
        else if (char == "")
            returnVal = "-"
        else
            returnVal = char;
        return returnVal;
    }

	 function isIncomeRider(amt,rider){
		//rider.replace(/^\s+|\s$/g,"")
		//$.trim(rider)
		var temp;
		temp = $.trim(rider)
		//alert(temp + "x")
        if (temp == "HLA Income Builder" || temp == "Income 20 Rider" || temp == "Income 30 Rider" || temp == "Income 40 Rider" || temp == "Income D-20 Rider" || temp == "Income D-30 Rider" || temp == "Income D-40 Rider" || temp == "Income E-20 Rider" || temp == "Income E-30 Rider"){
        	return amt + " *";
        }
        else
        	return amt + "&nbsp;&nbsp;";
    }
	

</script>
    <style type="text/css">
    * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
    }  
    </style>
        
</head>
 
<body onload="onBodyLoad(),setPage()">
 <span id="lbUsers"></span>
<!-- Begin Wrapper -->
<div id="wrapper">
 
<!-- Begin Header -->
<div id="header">
  
  
  <div class="welcome">
     Prepared By : <span id="agentName">{agentName}</span>
      <br/>Code : <span id="agentCode">{agentCode}</span>
  </div>
  <div class="Content">Printed On : <span id="dateModified">{DateModified}</span></div>
    
</div>
<hr/>
<div class="main-content">

    <table>
	<tr>
	    <td>
			- Marriage<br/>
			- Child Birth<br/>
			- Children's university admission<br/>
			- Children's graduation/convocation<br/>
			- Children's wedding<br/>
			- Purchase of new house<br/>
			- Starting of a business<br/>
			- Business Disruption<br/>
			- Policy Owner/ Parents/ Children admitted to hospital<br/>
			- Parent/children death<br/>
			- Policy owner diagnosed with critical illness<br/>
			- Policy owner suffers temporary total disablement due to illness or accident.<br/><br/>
			
			The above listed events are not exhaustive and the Company may include more events at its discretion from time to time.<br/>
			The amount payable to Policy Owner shall be 85% of the total next 5 years' GYI. Thereafter, the GYI due for the next 5 years immediately following the advancement shall cease to be payable in<br/>
			order to offset the said advancement. <br/><br/>
			
			Upon surrender or death/ TPD claim. the Company will deduct the outstanding GYI advanced accrued with interest of 5.67% per annum (if any) before making any payment.<br/>
			
	    </td>
	</tr>
	<tr id="hide">
	    <td>
		ii)	Upon the Life Assured attains the age 60 or 75, the Policy Owner may advance all future GYI provided that the policy has been in force for 10 years, and provided that the policy has sufficient Net Cash Surrender<br/>
			&nbsp;&nbsp;Value. The amount payable to Policy Owner shall be as illustrated below. Once the advancement of GYI is made, all the future GYI shall cease to be payable and the Guaranteed Death/TPD Benefit and Guaranteed<br/>
			&nbsp;&nbsp;Maturity benefit shall be revised as below. In addition, Cash Surrender Value, Cash Dividend, Terminal Dividend and Special Terminal Dividend will be adjusted accordingly.<br/>
			<br/>
			<br/>
			<table border="1" style="border-collapse: collapse" width="80%">
			    <tr>
				<td align="center">Premium Payment Term</td>
				<td align="center">Attained age upon advancement</td>
				<td align="center">Amount Payable</td>
				<td align="center">Guaranteed Death/TPD Benefit</td>
				<td align="center">Guaranteed Maturity Benefit</td>
			    </tr>
			    <tr>
				<td align="center"><span id="PremPayYear">{PremPayYear}</span></td>
				<td align="center"><span id="AdvanceYearlyIncome">{AdvanceYearlyIncome}</span></td>
				<td align="center"><span id="BasicSA">{BasicSA}</span><br/><span id="AmountPayableDesc">{AmountPayableDesc}</span></td>
				<td align="center"><span id="GuaranteedDeathOrTPDBenefit">{GuaranteedDeathOrTPDBenefit}</span></td>
				<td align="center"><span id="GuaranteedMaturityBenefit">{GuaranteedMaturityBenefit}</span></td>
			    </tr>
			</table>
			
	    </td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td>
		<b>Maturity Benefit</b><br/>
		The Policy will mature upon survival of Life Assured at the end of the policy term (age 90). A Maturity Benefit equivalent to the sum of 9 times of Guaranteed Yearly Income, Accumulated Guaranteed<br/>
		Yearly Income (if any), Accumulated Cash Dividend (if any) and Terminal Dividend (if any) shall be payable.<br/>
		<br/><br/>

		
	    </td>
	</tr>
    </table>
	
<table style="border-collapse:collapse;border:0px solid black;width:100%;">
	<tr>
		<td width="80%" style="font-family:Arial;font-size:10px;font-weight:normal;padding: 5px 5px 5px 0px;">
		This Product Disclosure Sheet consists of <span class="totalPagesPDS">{totalPagesPDS}</span> pages and each page forms an integral part of the Product Disclosure Sheet. A prospective policy owner is advised to read and understand the
		information printed on each and every page. <br/>
		<b><span id="rptVersion">{rptVersion}</span></b> <br/>
		Level 3, Tower B, PJ City Development, No. 15A Jalan 219, Seksyen 51A, 46100 Petaling Jaya, Selangor. Tel: 03-7650 1818 Fax: 03-7650 1991 Website: www.hla.com.my<br/>
		</td>
    	<td width="7%" align="left" valign="bottom" style="font-family:Arial;font-size:10px;font-weight:normal;">Page <span class="currentPagePDS">{currentPagePDS}</span> of <span class="totalPagesPDS">{totalPagesPDS}</span></td>
    	<td width="13%" align="right" valign="bottom" style="font-family:Arial;font-size:12px;font-weight:normal;">Ref: <span id=SICode>{SINo}</span></td>
	</tr>
</table>
<!-- End Footer -->
 
<!-- End Wrapper -->
 
</body>
</html>


