<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
<title>HLA</title>
<meta name="viewport" content="user-scalable=1, initial-scale=1, maximum-scale=5, minimum-scale=1, target-densitydpi=device-dpi" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/hla.js"></script>
<script type="text/javascript" charset="utf-8">
    var db;
    var shortName = 'WebSqlDB';
    var version = '1.0';
    var displayName = 'WebSqlDB';
    var maxSize = 65535;
    var siNo = '';
    var planCode = '';
    var planName = '';
    var cashPaymentD = '';
    var mcashPaymentD = '';
    var HMMRiderTerm = '';
    var FirstAge = '';
    //var cashPayment = 0;
    
    function errorHandler(transaction, error) {
        alert('Error: ' + error.message + ' code: ' + error.code);
    }
    
    function successCallBack() {
        alert("DEBUGGING: success");
        
    }
    
    function nullHandler(){};
    
    function onBodyLoad(){
        //alert($('#aa').text())
    	//alert("DEBUGGING: we are in the onBodyLoad() function");
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
            
        db = openDatabase(shortName, version, displayName,maxSize);
        ListDBValues();
        calcTotal();
    }
    
    function dbexe(){
        db.transaction(function(transaction) {
                       transaction.executeSql('SELECT * FROM SI_Temp_Trad_Details;', [], function(transaction, result) {
                                              if (result != null && result.rows != null) {
                                              var row;
                                              for (var i = 0; i < result.rows.length; i++) {
                                              var row = result.rows.item(i);
                                              }
        
                                              }
                                              },errorHandler);
                       },errorHandler,nullHandler);
    }
    
    function ListDBValues() {
        
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
        
        
        db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for (var i = 0; i < result.rows.length; i++) {
                        var row = result.rows.item(i);
                        $('#SICode').html(row.SINo);
                        siNo = row.SINo;
                        planName = row.PlanName;
                        planCode = row.PlanCode;                    
                    }
                }
                else{
			alert('No data can be found');
                    }
                                   
            },errorHandler);
        },errorHandler,nullHandler);
        
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'HSP_II'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
    		    HMMRiderTerm = row.RiderTerm;
		    $('#PlanOption').html(row.PlanOption);
		
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Details WHERE SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                	
			var now = new Date();
			var displayDate = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();
			var displayDateFull = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear() + ' ' + now.getHours() + ':' + now.getMinutes() + ':' + now.getSeconds();
			$('#dateModified').html(displayDateFull);
			$('#PrintDate').html(displayDate);
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql('SELECT * FROM SI_Store_Premium WHERE Type = "HSP_II" AND FromAge IS NULL;', [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
		    var row = result.rows.item(0);
		    $('#ValueA').html(row.Annually);                      
		    $('#ValueB').html(row.SemiAnnually);
		    $('#ValueC').html(row.Quarterly);
		    $('#ValueD').html(row.Monthly);
		    HMMRiderPrem = row.Annually.replace(',', '');
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad_LA where SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    //if(result.rows.length == 1){
	                  var row = result.rows.item(0);
			 FirstAge = row.Age;
			 $('#PayableAge').html(parseInt(HMMRiderTerm) + parseInt(FirstAge));                      
                    //}
		    
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
	    
	    var PolicyTerm;
	    if(HMMRiderTerm > 21){
		PolicyTerm =20;
	    }
	    else{
		PolicyTerm = HMMRiderTerm;
	    }
	    
            transaction.executeSql("SELECT * FROM Trad_Sys_Commission WHERE polTerm = '" + PolicyTerm + "' ORDER BY PolYear ASC", [], function(transaction, result) {
		
                if (result != null && result.rows != null) {
		    
                    for(var i = 1; i <=result.rows.length; i++){
			
			var row = result.rows.item(i-1);
			
			$('#Year'+i).html(formatCurrency(parseFloat(row.Rate)/100 * parseFloat(HMMRiderPrem)));                      
			
		    }
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
        return;
    }
    
    function calcTotal(){
        //alert($('#row0col5').text())
    }

    function formatCurrency(num) {
        if(num == '-'){
            return ('-');
        }
        num = num.toString().replace(/\$|\,/g, '');
        if (isNaN(num)) num = "0";
        sign = (num == (num = Math.abs(num)));
        num = Math.floor(num * 100 + 0.50000000001);
        cents = num % 100;
        num = Math.floor(num / 100).toString();
        if (cents < 10) cents = "0" + cents;
        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++)
        num = num.substring(0, num.length - (4 * i + 3)) + ',' + num.substring(num.length - (4 * i + 3));
        return (((sign) ? '' : '-') + '' + num + '.' + cents);
        //document.write (((sign) ? '' : '-') + '' + num + '.' + cents);
    }
    
    function replaceChar(char){
        var temp, returnVal;
        if (char == "0")
            returnVal = "-"
        else if (char == "")
            returnVal = "-"
        else
            returnVal = char;
        return returnVal;
    }

	 function isIncomeRider(amt,rider){
		//rider.replace(/^\s+|\s$/g,"")
		//$.trim(rider)
		var temp;
		temp = $.trim(rider)
		//alert(temp + "x")
        if (temp == "HLA Income Builder" || temp == "Income 20 Rider" || temp == "Income 30 Rider" || temp == "Income 40 Rider" || temp == "Income D-20 Rider" || temp == "Income D-30 Rider" || temp == "Income D-40 Rider" || temp == "Income E-20 Rider" || temp == "Income E-30 Rider"){
        	return amt + " *";
        }
        else
        	return amt + "&nbsp;&nbsp;";
    }
	

</script>
    <style type="text/css">
    * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
    }  
    </style>
        
</head>
 
<body onload="onBodyLoad(),setPage()" >
 <span id="lbUsers"></span>
<!-- Begin Wrapper -->
<div id="wrapper">
 
<!-- Begin Header -->
<div id="header">
  
  <div class="welcome">
  Prepared By : <span id="agentName">{agentName}</span>
  <br/>Code : <span id="agentCode">{agentCode}</span>
  </div>
  <div class="Content">Printed On : <span id="dateModified">{DateModified}</span></div>
  
</div>
<hr/>
<div class="main-content">
    
    <table>
	
	
	<tr>
	    <td width="10" valign="top"><b>3.</b></td>
	    <td>
		<b>How much premium do I have to pay?</b>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		-	The total premium you have to pay and the policy term may vary depending on the underwriting requirements of the insurance company.<br/><br/>
		The estimated total premium that you have to pay:
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td></td>
	    <td>
		<table id="table-2" style="border-collapse: collapse" border="1" width="70%">
		    <tr>
			<td rowspan="2"><b>Rider</b></td>
			<td colspan="4"><b>Initial Premium</b></td>
		    </tr>
		    <tr>
			<td><b>Annual (RM)</b></td>
			<td><b>Semi-annual (RM)</b></td>
			<td><b>Quarterly (RM)</b></td>
			<td><b>Monthly (RM)</b></td>
		    </tr>
		    <tr>
			<td>Hospital & Surgical Plus II <span id="PlanOption">{PlanOption}</span></td>
			<td><span id="ValueA">{ValueA}</span></td>
			<td><span id="ValueB">{ValueB}</span></td>
			<td><span id="ValueC">{ValueC}</span></td>
			<td><span id="ValueD">{ValueD}</span></td>
			
		    </tr>
		</table>    
	    </td>
	    
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td></td>
	    <td>Premium duration:</td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		<table id="table-3" style="border-collapse: collapse" border="1" width="50%">
		    <tr>
			<td><b>Rider</b></td>
			<td><b>Insured Lives</b></td>
			<td><b>Premium payable until age</b></td>
		    </tr>
		    <tbody>
			<td>Hospital & Surgical Plus II</td>
			<td><b>Life Assured</b></td>
			<td><span id="PayableAge">{PayableAge}</span></td>
		    </tbody>
		</table>    
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>-	Premium is not guaranteed and is subject to review by the Company at any time and from time to time by giving you at least 90-day written notice.</td>
	</tr>
	<tr>
	    <td width="10" valign="top"><b>4.</b></td>
	    <td valign="top"><b>What are the fees and charges I have to pay?</b></td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td width="10" valign="top"></td>
	    <td valign="top">
		<table id="table-1" border="1" style="border-collapse: collapse" width="70%">
		    <tr>
			<td width="50%" ><b>Type</b></td>
			<td><b>Amount</b></td>
		    </tr>
		    <tr>
			<td>Direct Distribution Cost paid to insurance agents</td>
			<td></td>
		    </tr>
		    <tr>
			<td>Year 1</td>
			<td><span id="Year1">{Year1}</span></td>
		    </tr>
		    <tr>
			<td>Year 2</td>
			<td><span id="Year2">{Year2}</span></td>
		    </tr>
		    <tr>
			<td>Year 3</td>
			<td><span id="Year3">{Year3}</span></td>
		    </tr>
		    <tr>
			<td>Year 4</td>
			<td><span id="Year4">{Year4}</span></td>
		    </tr>
		    <tr>
			<td>Year 5</td>
			<td><span id="Year5">{Year5}</span></td>
		    </tr>
		    <tr>
			<td>Year 6</td>
			<td><span id="Year6">{Year6}</span></td>
		    </tr>
		    <tr>
			<td>Year Thereafter</td>
			<td><span id="Year7">{Year7}</span></td>
		    </tr>
		    
		</table>
	    </td>
	</tr>
	<tr>
	    <td width="10" valign="top"><b>5.</b></td>
	    <td valign="top"><b>What are some of the key terms and conditions that I should be aware of?</b></td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td width="10" valign="top"></td>
	    <td valign="top">
		-	Importance of disclosure - you must disclose all material facts such as medical condition, and state your age correctly.<br/>
		-	Free-look period - you may cancel your policy by returning the policy within 15 days after you have received the policy.
			The premiums that you have paid (less any medical fee incurred) will be refunded to you.<br/>
		-	Qualifying / waiting period - the eligibility for benefits under the policy will only start 90 days after the effective date of the policy.<br/>
		- 	Unless renewed, the coverage will cease on expiry date and the insurance company shall strictly not be liable for any expenses that take place after the expiry date.<br/>
		- 	Co-insurance - You are required to bear the co-insurance amount of 10% of the amount claim per Any One Disability as admitted by the Company or the sum of RM300, whichever is higher, subject to the
			absolute
			&nbsp;&nbsp;&nbsp;maximum sum of RM3,000 (only applicable to Standard Plan).<br/>
		-	<b>All applications are subject to underwriting approval.</b><br/><br/>
		
		<i>Note: This list is non-exhaustive. Please refer to the policy contract for the terms and conditions under this policy.</i>
	    </td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td width="10" valign="top"><b>6.</b></td>
	    <td valign="top"><b>What are the major exclusions under this policy?</b><br/><br/>
		This policy does not cover any Hospitalisation, Surgery or charges caused directly or indirectly, wholly or partly, by any one of the following occurrences:<br/><br/>
		
		- Pre-existing Illness.
		
	    </td>
	</tr>
	
    </table>
	
<table style="border-collapse:collapse;border:0px solid black;width:100%;">
	<tr>
		<td width="80%" style="font-family:Arial;font-size:10px;font-weight:normal;padding: 5px 5px 5px 0px;">
		This Product Disclosure Sheet consists of <span class="totalPagesPDS">{totalPagesPDS}</span> pages and each page forms an integral part of the Product Disclosure Sheet. A prospective policy owner is advised to read and understand the
		information printed on each and every page. <br/>
		<b><span id="rptVersion">{rptVersion}</span></b> <br/>
		Level 3, Tower B, PJ City Development, No. 15A Jalan 219, Seksyen 51A, 46100 Petaling Jaya, Selangor. Tel: 03-7650 1818 Fax: 03-7650 1991 Website: www.hla.com.my<br/>
		</td>
    	<td width="7%" align="left" valign="bottom" style="font-family:Arial;font-size:10px;font-weight:normal;">Page <span class="currentPagePDS">{currentPagePDS}</span> of <span class="totalPagesPDS">{totalPagesPDS}</span></td>
    	<td width="13%" align="right" valign="bottom" style="font-family:Arial;font-size:12px;font-weight:normal;">Ref: <span id=SICode>{SINo}</span></td>
	</tr>
</table>
<!-- End Footer -->
 
<!-- End Wrapper -->
 
</body>
</html>


