<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
<title>HLA</title>
<meta name="viewport" content="user-scalable=1, initial-scale=1, maximum-scale=5, minimum-scale=1, target-densitydpi=device-dpi" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/hla.js"></script>
<script type="text/javascript" charset="utf-8">
    var db;
    var shortName = 'WebSqlDB';
    var version = '1.0';
    var displayName = 'WebSqlDB';
    var maxSize = 65535;
    var siNo = '';
    var planCode = '';
    var planName = '';
    var cashPaymentD = '';
    var mcashPaymentD = '';
    var FirstAge = '';
    var PA = '';
    var CustCode = '';
    var Deductible = '';
    //var cashPayment = 0;
    
    function errorHandler(transaction, error) {
        alert('Error: ' + error.message + ' code: ' + error.code);
    }
    
    function successCallBack() {
        alert("DEBUGGING: success");
        
    }
    
    function nullHandler(){};
    
    function onBodyLoad(){
        //alert($('#aa').text())
    	//alert("DEBUGGING: we are in the onBodyLoad() function");
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
            
        db = openDatabase(shortName, version, displayName,maxSize);
        ListDBValues();
        calcTotal();
    }
    
    function dbexe(){
        db.transaction(function(transaction) {
                       transaction.executeSql('SELECT * FROM SI_Temp_Trad_Details;', [], function(transaction, result) {
                                              if (result != null && result.rows != null) {
                                              var row;
                                              for (var i = 0; i < result.rows.length; i++) {
                                              var row = result.rows.item(i);
                                              }
        
                                              }
                                              },errorHandler);
                       },errorHandler,nullHandler);
    }
    
    function ListDBValues() {
        
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
        
        db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for (var i = 0; i < result.rows.length; i++) {
                        var row = result.rows.item(i);
                        $('#SICode').html(row.SINo);
                        siNo = row.SINo;
                        planName = row.PlanName;
                        planCode = row.PlanCode;                    
                    }
                }
                else{
			alert('No data can be found');
                    }
                                   
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_LAPayor where SINO = '" + siNo + "' AND PTypeCode = 'LA' AND Sequence = '1' ", [], function(transaction, result) {
                
		if (result != null && result.rows != null) {
		    var row = result.rows.item(0);
		     CustCode = row.CustCode;
		     
                }
                else{
			alert('No data can be found');
                    }
		                  
            },errorHandler);
	    
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            
	    transaction.executeSql("select PA from clt_profile AS A, Adm_Occp_Loading as B where A.OccpCode = B.OccpCode AND custcode = '" + CustCode + "' ", [], function(transaction, result) {
		if (result != null && result.rows != null) {
		    var row = result.rows.item(0);
		    PA = row.PA;
		    
		}
	     
	    },errorHandler);
        },errorHandler,nullHandler);
        
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Details WHERE SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    
		    var now = new Date();	
		    var displayDate = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();
		    var displayDateFull = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear() + ' ' + now.getHours() + ':' + now.getMinutes() + ':' + now.getSeconds();
		    $('#dateModified').html(displayDateFull);
                	
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'HMM' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    Deductible = row.Deductible;
                }
		else{
		    Deductible = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
        db.transaction(function(transaction) {
            transaction.executeSql('SELECT "1" as zzz,  "HLA Income Builder" as Plan, "Basic Plan" as Desc, Annually, ' +
				   'SemiAnnually, Quarterly, Monthly, "B" as RiderCode from SI_Store_Premium where Type in ("B") UNION ' +
				   'select "2" as zzz, riderdesc, "Rider", Annually, SemiAnnually, Quarterly, Monthly, RiderCode ' +
				   'FROM SI_Store_Premium as A, Trad_Sys_Rider_Profile as B where A.Type = B.Ridercode AND '+
				   'Type not in ("BOriginal") AND SemiAnnually IS NOT NULL;', [], function(transaction, result) {
                
		if (result != null && result.rows != null) {
		    
                    var row;
                    var col5Total, col6Total, col7Total, col8Total;
                                   col5Total = 0.00;
                                   col6Total = 0.00;
                                   col7Total = 0.00;
                                   col8Total = 0.00;
                    for (var i = 0; i < result.rows.length; i++) {
			var row = result.rows.item(i);
			var SA = '';
			
                        col5Total = col5Total + parseFloat(formatCurrency(row.Annually).replace(',','').replace('-', '0'));
                        col6Total = col6Total + parseFloat(formatCurrency(row.SemiAnnually).replace(',','').replace('-', '0'));
                        col7Total = col7Total + parseFloat(formatCurrency(row.Quarterly).replace(',','').replace('-', '0'));
                        col8Total = col8Total + parseFloat(formatCurrency(row.Monthly).replace(',','').replace('-', '0'));
           
			if(row.RiderCode == 'PR' || row.Plan == 'Critical Illness WP Rider' || row.Plan == 'Living Care Waiver Of Premium Payor Rider' ){
			    transaction.executeSql('SELECT * FROM Trad_Rider_Details WHERE SINO = "' + siNo + '" AND RiderCode = "' + row.RiderCode + '"  ', [], function(transaction, result1) {
				
				if (result1 != null && result1.rows != null) {
				    
				    var row1 = result1.rows.item(0);
				    SA = row1.SumAssured;
				    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '(' + SA + '%)' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
				}
			    },errorHandler);
			}
			else{
			    if(row.Plan == 'Hospital & Surgical Plus II' || row.Plan == 'MedGLOBAL II' || row.Plan == 'MedGLOBAL IV Plus' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + ' (Class' + PA + ')' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');
			    }
			    else if(row.Plan == 'HLA Major Medi' ){
				$('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + ' (Class' + PA + ') (Deductible ' + Deductible  + ')' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');
			    }
			    
			    else {
				$('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			    }
			}
	   
			
                    }
		    $('#table-data > tfoot').append('<tr>' + '<td colspan="2"><b>Total Premium</b></td>' + '<td>' + formatCurrency(col5Total.toFixed(2)) + '</td>' + '<td>' + formatCurrency(col6Total.toFixed(2)) + '</td>' + '<td>' + formatCurrency(col7Total.toFixed(2)) + '</td>' + '<td>' + formatCurrency(col8Total.toFixed(2)) + '</td>' + '</tr>');
		    $('#table-Tax > tbody').append('<tr>' + '<td><b>Service tax chargeable</b></td>' + '<td>' + formatCurrency(col5Total.toFixed(2) * 0.06) + '</td>' + '<td>' + formatCurrency(col6Total.toFixed(2) * 0.06) + '</td>' + '<td>' + formatCurrency(col7Total.toFixed(2) * 0.06) + '</td>' + '<td>' + formatCurrency(col8Total.toFixed(2) * 0.06) + '</td>' + '</tr>');
                }
            },errorHandler);
        },errorHandler,nullHandler);
        
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad_LA where SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    if(result.rows.length == 1){
	                  var row = result.rows.item(0);
			 FirstAge = row.Age;
                    }
                    
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            //transaction.executeSql("SELECT * FROM Trad_Details where SINo = '" + siNo + "'", [], function(transaction, result) {
            transaction.executeSql("SELECT * FROM (select '1' as No, 'HLA Income Builder' as PlanCode, 'Basic Plan' as Type, PremiumPaymentOption from Trad_Details where SINo = '"+ siNo + "' " +  
				   "UNION select '2',  RiderDesc, 'Rider' as type, Riderterm from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B where A.RiderCode = B.RiderCode AND SINo = '"+ siNo +"' AND A.RiderCode not in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R', 'C+', 'MG_IV', 'MG_II', 'HMM', 'HSP_II') " +
				   "UNION SELECT '2',  RiderDesc, 'Rider' as type, ( select premiumpaymentoption from trad_details where sino = '"+ siNo+"') from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B WHERE A.RiderCode = B.RiderCode AND sino = '"+ siNo +"' " +
				   "AND A.Ridercode in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R')   ) as zzz ORDER BY No, PlanCode ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for(var i =0; i <result.rows.length; i++){
	                var row = result.rows.item(i);
			$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '</td>' + '<td>' + row.Type + '</td>' + '<td>' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>'); 
                    }
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	
        return;
    }
    
    function calcTotal(){
        //alert($('#row0col5').text())
    }

    function formatCurrency(num) {
        if(num == '-'){
            return ('-');
        }
        num = num.toString().replace(/\$|\,/g, '');
        if (isNaN(num)) num = "0";
        sign = (num == (num = Math.abs(num)));
        num = Math.floor(num * 100 + 0.50000000001);
        cents = num % 100;
        num = Math.floor(num / 100).toString();
        if (cents < 10) cents = "0" + cents;
        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++)
        num = num.substring(0, num.length - (4 * i + 3)) + ',' + num.substring(num.length - (4 * i + 3));
        return (((sign) ? '' : '-') + '' + num + '.' + cents);
        //document.write (((sign) ? '' : '-') + '' + num + '.' + cents);
    }
    
    function replaceChar(char){
        var temp, returnVal;
        if (char == "0")
            returnVal = "-"
        else if (char == "")
            returnVal = "-"
        else
            returnVal = char;
        return returnVal;
    }

	 function isIncomeRider(amt,rider){
		//rider.replace(/^\s+|\s$/g,"")
		//$.trim(rider)
		var temp;
		temp = $.trim(rider)
		//alert(temp + "x")
        if (temp == "HLA Income Builder" || temp == "Income 20 Rider" || temp == "Income 30 Rider" || temp == "Income 40 Rider" || temp == "Income D-20 Rider" || temp == "Income D-30 Rider" || temp == "Income D-40 Rider" || temp == "Income E-20 Rider" || temp == "Income E-30 Rider"){
        	return amt + " *";
        }
        else
        	return amt + "&nbsp;&nbsp;";
    }
	

</script>
    <style type="text/css">
    * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
    }  
    </style>
        
</head>
 
<body onload="onBodyLoad(),setPage()">
 <span id="lbUsers"></span>
<!-- Begin Wrapper -->
<div id="wrapper">
 
<!-- Begin Header -->
<div id="header">
  
  <div class="welcome">
     Prepared By : <span id="agentName">{agentName}</span>
      <br/>Code : <span id="agentCode">{agentCode}</span>
  </div>
  <div class="Content">Printed On : <span id="dateModified">{DateModified}</span></div>
    
</div>
<hr/>
<div class="main-content">

    <table>
	<tr>
	    <td><b>3.</b></td>
	    <td>
		<b>How much premium do I have to pay?</b>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>-    The total premium you have to pay and the policy term may vary depending on the underwriting requirements of the insurance company.</td>
	    
	</tr>
	<br/>
	<tr>
	    <td></td>
	    <td>The estimated total premium that you have to pay:</td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		<table border="1" id="table-data">
		    <thead>
			<tr>
			    <td rowspan="2" align="left"><b>Plan/Rider</b></td>
			    <td rowspan="2"><b>Type</b></td>
			    <td colspan="4" align="left"><b>Initial Premium</b></td>
			</tr>
			<tr>
			    <td><b>Annual (RM)</b></td>
			    <td><b>Semi-annual (RM)</b></td>
			    <td><b>Quarterly (RM)</b></td>
			    <td><b>Monthly (RM)</b></td>
			</tr>
		    </thead>
		    <tbody>
			<!--sql data here-->
		    </tbody>
		    <tfoot>
			<!--total premium here-->
		    </tfoot>
		</table>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		- Premium Duration:
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		<table border="1"  style="border-collapse:collapse;" id="table-PremiumDuration" width="100%" >
		    <thead>
			<tr>
			    <td><b>Plan/Rider</b></td>
			    <td><b>Type</b></td>
			    <td><b>Premium payable until age</b></td>
			</tr>
		    </thead>
		    <tbody>
			<!--sql data here-->
		    </tbody>
		    
		</table>
	    </td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td valign="top"><b>4.</b> </td>
	    <td valign="top">
		<b>What are the fees and charges I have to pay?</b>
		<br/>
		6% service tax is chargeable if the policy belongs to a corporate. Otherwise, there is no service tax chargeable if it belongs to an individual. Service tax chargeable is as follow:
	    </td>
	</tr>
	<tr>
	    <td valign="top"></td>
	    <td valign="top">
		<table border="1"  style="border-collapse:collapse;" id="table-Tax" width="100%" >
		    <thead align="center">
			<tr>
			    <td><b>Premium Payment Frequency</b></td>
			    <td><b>Annual (RM)</b></td>
			    <td><b>Semi-annual (RM)</b></td>
			    <td><b>Quarterly (RM)</b></td>
			    <td><b>Monthly (RM)</b></td>
			</tr>
		    </thead>
		    <tbody align="center">
			<!--sql data here-->
		    </tbody>
		    
		</table>
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td valign="top"><b>5.</b> </td>
	    <td valign="top">
		<b>What are some of the key terms and conditions that I should be aware of?</b>
		<br/><br/>
		- Importance of disclosure - you must disclose all material facts such as medical condition, and state your age correctly.<br/>
		- Free-look period - you may cancel your policy by returning the policy within 15 days after you have received the policy. The premiums that you have paid (less any medical fee incurred) will be refunded to you.<br/>
		- <b>All applications are subject to underwriting approval.</b><br/>
		<br/>
		<i>Note: This list is non-exhaustive. Please refer to the policy contract for the terms and conditions under this policy.</i>
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td valign="top"><b>6.</b></td>
	    <td valign="top">What are the major exclusions under this policy?</td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td></td>
	    <td>
		<u><b>Basic Plan</b></u>
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td></td>
	    <td>
		<u><b>Death Benefit</b></u>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		If the Life Assured whether sane or insane, commits suicide within twelve (12) months from the Issue Date or the Reinstatement Date,
		whichever is the later, this Policy shall become void and we shall return the premiums paid without interest after deducting any amount due to us under this Policy.
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td></td>
	    <td>
		<u><b>Total & Permanent Disability</b></u>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		The policy shall not cover Total & Permanent Disability resulted directly or indirectly;<br/>
		- 	from any self-inflicted bodily injury while sane or insane;<br/>
		-	from any nervous disorder or mental illness;<br/>
		-	from flying in an aircraft (except as an aircrew member of, or as an ordinary fare paying passenger, on a regularly scheduled flight of a commercial airline); or<br/>
		- 	from anything whatsoever while as a member of the armed forces, police and paramilitary forces as a result of declared or undeclared war, riots or civil commotion.<br/>

	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		<u><b>Attaching Rider(s)</b></u>	
	    </td>
	</tr>
	
	
    </table>
	
<table style="border-collapse:collapse;border:0px solid black;width:100%;">
	<tr>
		<td width="80%" style="font-family:Arial;font-size:10px;font-weight:normal;padding: 5px 5px 5px 0px;">
		    This Product Disclosure Sheet consists of <span class="totalPagesPDS">{totalPagesPDS}</span> pages and each page forms an integral part of the Product Disclosure Sheet. A prospective policy owner is advised to read and understand the
		    information printed on each and every page. <br/>
		    <b><span id="rptVersion">{rptVersion}</span></b> <br/>
		    Level 3, Tower B, PJ City Development, No. 15A Jalan 219, Seksyen 51A, 46100 Petaling Jaya, Selangor. Tel: 03-7650 1818 Fax: 03-7650 1991 Website: www.hla.com.my<br/>
		</td>
    	<td width="7%" align="left" valign="bottom" style="font-family:Arial;font-size:10px;font-weight:normal;">Page <span class="currentPagePDS">{currentPagePDS}</span> of <span class="totalPagesPDS">{totalPagesPDS}</span></td>
    	<td width="13%" align="right" valign="bottom" style="font-family:Arial;font-size:12px;font-weight:normal;">Ref: <span id=SICode>{SINo}</span></td>
	</tr>
</table>
<!-- End Footer -->
 
<!-- End Wrapper -->
 
</body>
</html>


