<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
<title>HLA</title>
<meta name="viewport" content="user-scalable=1, initial-scale=1, maximum-scale=5, minimum-scale=1, target-densitydpi=device-dpi" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/hla.js"></script>
<script type="text/javascript" charset="utf-8">
    var db;
    var shortName = 'WebSqlDB';
    var version = '1.0';
    var displayName = 'WebSqlDB';
    var maxSize = 65535;
    var siNo = '';
    var planCode = '';
    var planName = '';
    var cashPaymentD = '';
    var mcashPaymentD = '';
    var FirstAge = '';
    var SecondAge = '';
    var PayorAge = '';
    var PA = '';
    var CustCode = '';
    var Deductible = '';
    var PlanOption = '';
    //var cashPayment = 0;
    var LCWPSA = '';
    var CIWPSA = '';
    var PRSA = '';
    var SP_STDSA = '';
    var SP_PRESA = '';
    
    function errorHandler(transaction, error) {
        alert('Error: ' + error.message + ' code: ' + error.code);
    }
    
    function successCallBack() {
        alert("DEBUGGING: success");
        
    }
    
    function nullHandler(){};
    
    function onBodyLoad(){
        //alert($('#aa').text())
    	//alert("DEBUGGING: we are in the onBodyLoad() function");
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
            
        db = openDatabase(shortName, version, displayName,maxSize);
        ListDBValues();
        calcTotal();
    }
    
    function dbexe(){
        db.transaction(function(transaction) {
                       transaction.executeSql('SELECT * FROM SI_Temp_Trad_Details;', [], function(transaction, result) {
                                              if (result != null && result.rows != null) {
                                              var row;
                                              for (var i = 0; i < result.rows.length; i++) {
                                              var row = result.rows.item(i);
                                              }
        
                                              }
                                              },errorHandler);
                       },errorHandler,nullHandler);
    }
    
    function ListDBValues() {
        
        if (!window.openDatabase) {
            alert('Databases are not supported in this browser.');
            return;
        }
        
        db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for (var i = 0; i < result.rows.length; i++) {
                        var row = result.rows.item(i);
                        $('#SICode').html(row.SINo);
                        siNo = row.SINo;
                        planName = row.PlanName;
                        planCode = row.PlanCode;                    
                    }
                }
                else{
			alert('No data can be found');
                    }
                                   
            },errorHandler);
        },errorHandler,nullHandler);
        
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_LAPayor where SINO = '" + siNo + "' AND PTypeCode = 'LA' AND Sequence = '1' ", [], function(transaction, result) {
                
		if (result != null && result.rows != null) {
		    var row = result.rows.item(0);
		     CustCode = row.CustCode;
		     
                }
                else{
			alert('No data can be found');
                    }
		                  
            },errorHandler);
	    
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            
	    transaction.executeSql("select PA from clt_profile AS A, Adm_Occp_Loading as B where A.OccpCode = B.OccpCode AND custcode = '" + CustCode + "' ", [], function(transaction, result) {
		if (result != null && result.rows != null) {
		    var row = result.rows.item(0);
		    PA = row.PA;
		    
		}
	     
	    },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Details WHERE SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    
		    var now = new Date();	
		    var displayDate = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();
		    var displayDateFull = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear() + ' ' + now.getHours() + ':' + now.getMinutes() + ':' + now.getSeconds();
		    $('#dateModified').html(displayDateFull);
                	
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'HMM' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    Deductible = row.Deductible;
		    PlanOption = row.PlanOption;
                }
		else{
		    Deductible = '';
		    PlanOption = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'LCWP' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    LCWPSA = row.SumAssured;
                }
		else{
		    LCWPSA = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'CIWP' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    CIWPSA = row.SumAssured;
                }
		else{
		    CIWPSA = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'PR' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    PRSA = row.SumAssured;
                }
		else{
		    PRSA = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'SP_PRE' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    SP_PRESA = row.SumAssured;
                }
		else{
		    SP_PRESA = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM Trad_Rider_Details WHERE SINo = '" + siNo + "' AND RiderCode = 'SP_STD' ", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row = result.rows.item(0);
                    SP_STDSA = row.SumAssured;
                }
		else{
		    SP_STDSA = '';
		}
            },errorHandler);
        },errorHandler,nullHandler);
	
	
        db.transaction(function(transaction) {
            var Query;
	    
	    if(planCode == 'HLAIB'){
		Query = 'SELECT "1" as zzz,  "HLA Income Builder" as Plan, "Pelan Asas" as Desc, Annually, ' +
				   'SemiAnnually, Quarterly, Monthly, "B" as RiderCode from SI_Store_Premium where Type in ("B") UNION ' +
				   'select "2" as zzz, riderdesc, "Rider", Annually, SemiAnnually, Quarterly, Monthly, RiderCode ' +
				   'FROM SI_Store_Premium as A, Trad_Sys_Rider_Profile as B where A.Type = B.Ridercode AND '+
				   'Type not in ("BOriginal") AND SemiAnnually IS NOT NULL;';
	    }
	    else if(planCode == 'HLACP'){
		Query = 'SELECT "1" as zzz,  "HLA Cash Promise" as Plan, "Pelan Asas" as Desc, Annually, ' +
				   'SemiAnnually, Quarterly, Monthly, "B" as RiderCode from SI_Store_Premium where Type in ("B") UNION ' +
				   'select "2" as zzz, riderdesc, "Rider", Annually, SemiAnnually, Quarterly, Monthly, RiderCode ' +
				   'FROM SI_Store_Premium as A, Trad_Sys_Rider_Profile as B where A.Type = B.Ridercode AND '+
				   'Type not in ("BOriginal") AND SemiAnnually IS NOT NULL;';
	    }
	    
            transaction.executeSql(Query, [], function(transaction, result) {
            
		if (result != null && result.rows != null) {
		    
                    var row;
                    var col5Total, col6Total, col7Total, col8Total;
                                   col5Total = 0.00;
                                   col6Total = 0.00;
                                   col7Total = 0.00;
                                   col8Total = 0.00;
                    for (var i = 0; i < result.rows.length; i++) {
			var row = result.rows.item(i);
			
                        col5Total = col5Total + parseFloat(formatCurrency(row.Annually).replace(',','').replace('-', '0'));
                        col6Total = col6Total + parseFloat(formatCurrency(row.SemiAnnually).replace(',','').replace('-', '0'));
                        col7Total = col7Total + parseFloat(formatCurrency(row.Quarterly).replace(',','').replace('-', '0'));
                        col8Total = col8Total + parseFloat(formatCurrency(row.Monthly).replace(',','').replace('-', '0'));
           
			if(row.Plan == 'Hospital & Surgical Plus II' || row.Plan == 'MedGLOBAL II' || row.Plan == 'MedGLOBAL IV Plus' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + ' (Class' + PA + ')' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');
			}
			else if(row.Plan == 'HLA Major Medi' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + 'Rider HLA Major Medi' + ' ' + PlanOption + ' (Class' + PA + ') (Penolakan ' + Deductible  + ')' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');
			}
			else if(row.RiderCode == 'PR' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '(' + PRSA + '%)' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			}
			else if(row.RiderCode == 'CIWP' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '(' + CIWPSA + '%)' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			}
			else if(row.RiderCode == 'LCWP' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '(' + LCWPSA + '%)' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			}
			else if(row.RiderCode == 'SP_PRE' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '(' + SP_PRESA + '%)' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			}
			else if(row.RiderCode == 'SP_STD' ){
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '(' + SP_STDSA + '%)' + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			}
			else{
			    $('#table-data > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.Plan + '</td>' + '<td>' + row.Desc + '</td>' + '<td>' + formatCurrency(row.Annually) + '</td>' + '<td>' + formatCurrency(row.SemiAnnually) + '</td>'  + '<td>' + formatCurrency(row.Quarterly) + '</td>' + '<td>' + formatCurrency(row.Monthly) + '</td>' + '</tr>');    
			}
			
                    }
		    $('#table-data > tfoot').append('<tr>' + '<td colspan="2"><b>Jumlah Bayaran Premium</b></td>' + '<td><b>' + formatCurrency(col5Total.toFixed(2)) + '</b></td>' + '<td><b>' + formatCurrency(col6Total.toFixed(2)) + '</b></td>' + '<td><b>' + formatCurrency(col7Total.toFixed(2)) + '</b></td>' + '<td><b>' + formatCurrency(col8Total.toFixed(2)) + '</b></td>' + '</tr>');
		    $('#table-Tax > tbody').append('<tr>' + '<td>Cukai Perkhidmatan yang Dikenakan</td>' + '<td>' + formatCurrency(col5Total.toFixed(2) * 0.06) + '</td>' + '<td>' + formatCurrency(col6Total.toFixed(2) * 0.06) + '</td>' + '<td>' + formatCurrency(col7Total.toFixed(2) * 0.06) + '</td>' + '<td>' + formatCurrency(col8Total.toFixed(2) * 0.06) + '</td>' + '</tr>');
                }
            },errorHandler);
        },errorHandler,nullHandler);
        
	db.transaction(function(transaction) {
            transaction.executeSql("SELECT * FROM SI_Temp_Trad_LA where SINo = '" + siNo + "'", [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for(var i = 0; i < result.rows.length; i++){
			if(i == 0){
	                  var row = result.rows.item(i);
			  FirstAge = row.Age;
		        }
			
			if(i == 1){
	                  var row = result.rows.item(i);
			    if(row.PTypeCode == 'PY'){
				PayorAge = row.Age;  
			    }
			    else{
				SecondAge = row.Age;  
			    }
		        }
		    }
                    
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	db.transaction(function(transaction) {
            
            var Query;
	    /*
	    if(planCode == 'HLAIB'){
		Query = "SELECT * FROM (select '1' as No, 'HLA Income Builder' as PlanCode, 'Pelan Asas' as Type, PremiumPaymentOption, 'B' as RiderCode from Trad_Details where SINo = '"+ siNo + "' " +  
				   "UNION select '2',  RiderDesc, 'Rider' as type, Riderterm, A.RiderCode from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B where A.RiderCode = B.RiderCode AND SINo = '"+ siNo +"' AND A.RiderCode not in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R', 'C+', 'MG_IV', 'MG_II', 'HMM', 'HSP_II') " +
				   "UNION SELECT '2',  RiderDesc, 'Rider' as type, ( select premiumpaymentoption from trad_details where sino = '"+ siNo+"'), A.RiderCode from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B WHERE A.RiderCode = B.RiderCode AND sino = '"+ siNo +"' " +
				   "AND A.Ridercode in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R')   ) as zzz ORDER BY No, PlanCode "
	    }
	    else if(planCode == 'HLACP'){
		Query = "SELECT * FROM (select '1' as No, 'HLA Cash Promise' as PlanCode, 'Pelan Asas' as Type, PremiumPaymentOption, 'B' as RiderCode, 'LA' as 'PTypeCode', '1' as Seq from Trad_Details where SINo = '"+ siNo + "' " +  
				   "UNION select '2',  RiderDesc, 'Rider' as type, Riderterm, A.RiderCode, A.PTypeCode, A.Seq from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B where A.RiderCode = B.RiderCode AND SINo = '"+ siNo +"' AND A.RiderCode not in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R', 'C+', 'MG_IV', 'MG_II', 'HMM', 'HSP_II','EDB', 'ETPDB') " +
				   "UNION SELECT '2',  RiderDesc, 'Rider' as type, ( select premiumpaymentoption from trad_details where sino = '"+ siNo+"'), A.RiderCode, A.PTypeCode, A.Seq from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B WHERE A.RiderCode = B.RiderCode AND sino = '"+ siNo +"' " +
				   "AND A.Ridercode in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R','EDB', 'ETPDB')   ) as zzz ORDER BY No, PlanCode "
	    }
	    */
	    if(planCode == 'HLAIB'){
		Query = "SELECT * FROM (select '1' as No, 'HLA Income Builder' as PlanCode, 'Pelan Asas' as Type, PremiumPaymentOption, 'B' as RiderCode from Trad_Details where SINo = '"+ siNo + "' " +  
				   "UNION select '2',  RiderDesc, 'Rider' as type, Riderterm, A.RiderCode from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B where A.RiderCode = B.RiderCode AND SINo = '"+ siNo +"' AND A.RiderCode not in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R', 'C+', 'MG_IV', 'MG_II', 'HMM', 'HSP_II') " +
				   "UNION SELECT '2',  RiderDesc, 'Rider' as type, ( select premiumpaymentoption from trad_details where sino = '"+ siNo+"'), A.RiderCode from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B WHERE A.RiderCode = B.RiderCode AND sino = '"+ siNo +"' " +
				   "AND A.Ridercode in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R')   ) as zzz ORDER BY No, PlanCode "
	    }
	    else if(planCode == 'HLACP'){
		Query = "SELECT * FROM (select '1' as No, 'HLA Cash Promise' as PlanCode, 'Pelan Asas' as Type, PremiumPaymentOption, 'B' as RiderCode, 'LA' as 'PTypeCode', '1' as Seq from Trad_Details where SINo = '"+ siNo + "' " +  
				   "UNION select '2',  RiderDesc, 'Rider' as type, Riderterm, A.RiderCode, A.PTypeCode, A.Seq from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B where A.RiderCode = B.RiderCode AND SINo = '"+ siNo +"' AND A.RiderCode not in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R', 'C+', 'MG_IV', 'MG_II', 'HMM', 'HSP_II','EDB', 'ETPDB') " +
				   "UNION SELECT '2',  RiderDesc, 'Rider' as type, ( select premiumpaymentoption from trad_details where sino = '"+ siNo+"'), A.RiderCode, A.PTypeCode, A.Seq from Trad_Rider_Details as A, Trad_Sys_Rider_Profile as B WHERE A.RiderCode = B.RiderCode AND sino = '"+ siNo +"' " +
				   "AND A.Ridercode in ('I20R','I30R','I40R','IE20R','IE30R','ID20R','ID30R','ID40R','EDB', 'ETPDB')   ) as zzz ORDER BY No, PlanCode "
	    }
            transaction.executeSql(Query, [], function(transaction, result) {
                if (result != null && result.rows != null) {
                    var row;
                    for(var i =0; i <result.rows.length; i++){
	                var row = result.rows.item(i);
			if(row.RiderCode == 'CIWP'){
			    $('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + CIWPSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>Hayat Diinsuranskan</td>'  + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');     
			}
			else if(row.RiderCode == 'PR'){
			    //$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + PRSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td>' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');
			    if(row.PTypeCode == 'LA'){
				$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + PRSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(SecondAge) ) + '</td>' + '</tr>');     
			    }
			    else{
				$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + PRSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(PayorAge) ) + '</td>' + '</tr>');     
			    }
			}
			else if(row.RiderCode == 'LCWP'){
			    //$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + LCWPSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td>' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');
			    if(row.PTypeCode == 'LA'){
				$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + LCWPSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(SecondAge) ) + '</td>' + '</tr>');     
			    }
			    else{
				$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + LCWPSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(PayorAge) ) + '</td>' + '</tr>');     
			    }
			}
			else if(row.RiderCode == 'SP_PRE'){
			    $('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + SP_PRESA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>Hayat Diinsuranskan ke-2</td>'  + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');     
			}
			else if(row.RiderCode == 'SP_STD'){
			    $('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '(' + SP_STDSA  + '%)'+ '</td>' + '<td>' + row.Type + '</td>' + '<td>Hayat Diinsuranskan ke-2</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');     
			}
			else{
			    //$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td>' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');
			    if(row.PTypeCode == 'LA'){
				$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(FirstAge) ) + '</td>' + '</tr>');     
			    }
			    else{
				$('#table-PremiumDuration > tbody').append('<tr>' + '<td style="text-align:left;padding: 0px 0px 0px 5px;">' + row.PlanCode + '</td>' + '<td>' + row.Type + '</td>' + '<td>' + Insured(row.PTypeCode, row.Seq)  + '</td>' + '<td style="text-align:center;">' + (parseInt(row.PremiumPaymentOption) + parseInt(PayorAge) ) + '</td>' + '</tr>');     
			    }
			}

                    }
                }
            },errorHandler);
        },errorHandler,nullHandler);
	
	
        return;
    }
    
    function calcTotal(){
        //alert($('#row0col5').text())
    }
    
    function Insured(PersonType, Sequence){
        if(PersonType == 'LA'){
	    if(Sequence == '1'){
		return 'Hayat Diinsuranskan';
	    }
	    else{
		return 'Hayat Diinsuranskan ke-2';
	    }
	}
	else{
	    return 'Pemunya Polisi';
	}
    }
    

    function formatCurrency(num) {
        if(num == '-'){
            return ('-');
        }
        num = num.toString().replace(/\$|\,/g, '');
        if (isNaN(num)) num = "0";
        sign = (num == (num = Math.abs(num)));
        num = Math.floor(num * 100 + 0.50000000001);
        cents = num % 100;
        num = Math.floor(num / 100).toString();
        if (cents < 10) cents = "0" + cents;
        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++)
        num = num.substring(0, num.length - (4 * i + 3)) + ',' + num.substring(num.length - (4 * i + 3));
        return (((sign) ? '' : '-') + '' + num + '.' + cents);
        //document.write (((sign) ? '' : '-') + '' + num + '.' + cents);
    }
    
    function replaceChar(char){
        var temp, returnVal;
        if (char == "0")
            returnVal = "-"
        else if (char == "")
            returnVal = "-"
        else
            returnVal = char;
        return returnVal;
    }

	 function isIncomeRider(amt,rider){
		//rider.replace(/^\s+|\s$/g,"")
		//$.trim(rider)
		var temp;
		temp = $.trim(rider)
		//alert(temp + "x")
        if (temp == "HLA Income Builder" || temp == "Income 20 Rider" || temp == "Income 30 Rider" || temp == "Income 40 Rider" || temp == "Income D-20 Rider" || temp == "Income D-30 Rider" || temp == "Income D-40 Rider" || temp == "Income E-20 Rider" || temp == "Income E-30 Rider"){
        	return amt + " *";
        }
        else
        	return amt + "&nbsp;&nbsp;";
    }
	

</script>
    <style type="text/css">
    * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
    }  
    </style>
        
</head>
 
<body onload="onBodyLoad(),setPage()">
 <span id="lbUsers"></span>
<!-- Begin Wrapper -->
<div id="wrapper">
 
<!-- Begin Header -->
<div id="header">
  
  <div class="welcome">
     Prepared By : <span id="agentName">{agentName}</span>
      <br/>Code : <span id="agentCode">{agentCode}</span>
  </div>
  <div class="Content">Printed On : <span id="dateModified">{DateModified}</span></div>
    
</div>
<hr/>
<div class="main-content">

    <table>
	<tr>
	    <td><b>3</b></td>
	    <td>
		<b>Berapakah premium yang perlu saya bayar?</b>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>- Jumlah premium yang perlu anda bayar dan tempoh polisi mungkin berbeza mengikut keperluan penanggungjaminan syarikat insurans.</td>
	    
	</tr>
	<br/>
	<tr>
	    <td></td>
	    <td>Anggaran jumlah premium yang perlu anda bayar:</td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		<table border="1" id="table-data">
		    <thead>
			<tr>
			    <td rowspan="2" align="left"><b>Pelan/Rider</b></td>
			    <td rowspan="2"><b>Jenis</b></td>
			    <td colspan="4" align="left"><b>Premium Awal</b></td>
			</tr>
			<tr>
			    <td><b>Tahunan (RM)</b></td>
			    <td><b>Setengah Tahunan (RM)</b></td>
			    <td><b>Suku Tahunan (RM)</b></td>
			    <td><b>Bulanan (RM)</b></td>
			</tr>
		    </thead>
		    <tbody>
			<!--sql data here-->
		    </tbody>
		    <tfoot>
			<!--total premium here-->
		    </tfoot>
		</table>
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		- Premium Duration:
	    </td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		<table border="1"  style="border-collapse:collapse;" id="table-PremiumDuration" width="100%" >
		    <thead>
			<tr>
			    <td><b>Pelan/Rider</b></td>
			    <td><b>Jenis</b></td>
			    <td><b>Hayat-hayat yang Diinsuranskan</b></td>
			    <td align="center"><b>Premium akan dibayar sehingga Hayat yang Diinsuranskan berumur</b></td>
			</tr>
		    </thead>
		    <tbody>
			<!--sql data here-->
		    </tbody>
		    
		</table>
	    </td>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr>
	    <td valign="top"><b>4.</b></td>
	    <td valign="top">
		<b>Apakah yuran dan bayaran yang perlu saya bayar?</b>
		<br/>
		Jika polisi ini dimiliki oleh seseorang individu, tiada bayaran akan dikenakan; namun begitu, jika polisi ini dimiliki oleh syarikat, cukai perkhidmatan sebanyak 6% akan dikenakan. Cukai perkhidmatan adalah seperti
		di bawah:
	    </td>
	</tr>
	<tr>
	    <td valign="top"></td>
	    <td valign="top">
		<table border="1"  style="border-collapse:collapse;" id="table-Tax" width="100%" >
		    <thead align="center">
			<tr>
			    <td><b>Frekuensi Pembayaran Premium</b></td>
			    <td><b>Tahunan (RM)</b></td>
			    <td><b>Setengah Tahunan (RM)</b></td>
			    <td><b>Suku Tahunan (RM)</b></td>
			    <td><b>Bulanan (RM)</b></td>
			</tr>
		    </thead>
		    <tbody align="center">
			<!--sql data here-->
		    </tbody>
		    
		</table>
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td valign="top"><b>5.</b> </td>
	    <td valign="top">
		<b>Apakah antara terma dan syarat utama yang perlu saya ketahui?</b>
		<br/><br/>
		- Kepentingan pendedahan - anda mestilah mendedahkan semua fakta penting seperti keadaan perubatan, dan nyatakan umur anda dengan betul.<br/>
		- Tempoh bertenang - anda boleh membatalkan polisi anda dengan mengembalikan polisi dalam tempoh 15 hari setelah anda menerima polisi tersebut. Premium yang telah anda bayar (selepas tolak perbelanjaan<br/>
		    perubatan yang telah dibuat) akan dipulangkan kepada anda.<br/>
		- <b>Kesemua permohanan adalah tertakluk kepada kelulusan pengunderaitan</b><br/>    
		<br/>
		<i>Nota: Senarai ini tidak lengkap. Sila rujuk kontrak polisi untuk mendapatkan terma dan syarat di bawah polisi ini.</i>
	    </td>
	</tr>
	<tr><td></td></tr>
	<tr>
	    <td valign="top"><b>6.</b></td>
	    <td valign="top"><b>Apakah pengecualian utama di bawah polisi ini?</b></td>
	</tr>
	<tr>
	    <td></td>
	    <td><b>A)</b>  <b><u>Pelan Asas</u></b></td>
	</tr>
	<tr>
	    <td></td>
	    <td>
		&nbsp;&nbsp;&nbsp;<b>I) Faedah Kematian</b><br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Jika Hayat Diinsuranskan sama ada siuman atau tidak siuman, membunuh diri dalam tempoh dua belas (12) bulan dari Tarikh Penyertaan atau
		Tarikh Pengembalian Semula, mengikut mana-mana yang terkemudian,
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Polisi ini akan menjadi tidak sah dan kami akan memulangkan premium yang telah dibayar tanpa faedah selepas menolak sebarang jumlah yang terhutang kepada kami di bawah Polisi ini.<br/><br/>
		
		&nbsp;&nbsp;&nbsp;<b>II) Total & Permanent Disability</b><br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Polisi ini tidak akan melindungi Hilang Upaya Menyeluruh & Kekal yang berpunca secara langsung atau tidak langsung;<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o &nbsp;&nbsp;&nbsp;&nbsp; daripada sebarang kecederaan anggota badan yang disengajakan ketika siuman atau tidak siuman;<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o &nbsp;&nbsp;&nbsp;&nbsp; daripada sebarang gangguan saraf atau penyakit mental;<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o &nbsp;&nbsp;&nbsp;&nbsp; daripada penerbangan di dalam pesawat udara (kecuali sebagai anak kapal, atau sebagai penumpang biasa yang membayar tambang, dalam mana-mana penerbangan komersil berjadual tetap); atau<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o &nbsp;&nbsp;&nbsp;&nbsp; daripada apa jua perkara ketika berkhidmat dalam angkatan bersenjata, polis dan angkatan separa tentera disebabkan oleh perang yang diisytiharkan atau tidak diisytiharkan, rusuhan atau kekecohan awam.<br/>

		<i>Nota: Senarai ini tidak lengkap. Sila rujuk kontrak polisi untuk mendapatkan terma dan syarat di bawah polisi ini.</i>
	    </td>
	</tr>
	
    </table>
	
<table style="border-collapse:collapse;border:0px solid black;width:100%;">
    <tr>
	    <td width="80%" style="font-family:Arial;font-size:10px;font-weight:normal;padding: 5px 5px 5px 0px;">
		Risalah Pendedahan Produk ini mengandungi <span class="totalPagesPDS">{totalPagesPDS}</span> muka surat and setiap muka surat membentuk sebahagian daripada Risalah Pendedahan Produk. Bakal pemunya polisi
		adalah dinasihatkan untuk membaca dan memahami maklumat yang tercetak pada setiap muka surat. <br/>
		<b><span id="rptVersion">{rptVersion}</span></b> <br/>
		Level 3, Tower B, PJ City Development, No. 15A Jalan 219, Seksyen 51A, 46100 Petaling Jaya, Selangor. Tel: 03-7650 1818 Fax: 03-7650 1991 Website: www.hla.com.my<br/>
	    </td>
	    <td width="7%" align="left" valign="bottom" style="font-family:Arial;font-size:10px;font-weight:normal;">Page <span class="currentPagePDS">{currentPagePDS}</span> of <span class="totalPagesPDS">{totalPagesPDS}</span></td>
	    <td width="13%" align="right" valign="bottom" style="font-family:Arial;font-size:12px;font-weight:normal;">Ref: <span id=SICode>{SINo}</span></td>
	</tr>
</table>
<!-- End Footer -->
 
<!-- End Wrapper -->
 
</body>
</html>


